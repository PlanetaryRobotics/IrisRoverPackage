<!DOCTYPE html>
<html>
<head>
<title>motorControl:MotorControl Component Dictionary</title>
</head>
<body>

<style>
table, th, td {
    border: 1px solid black;
    border-collapse: collapse;
}
th, td {
    padding: 5px;
}
th {
    text-align: left;
}
html {
    font-family: Arial, sans-serif ;
    font-size: 90% ;
}
</style>


<h1><b>Command: motorControl:MotorControl</b></h1>



<table>
	<thead>
		<tr style = "border-right: 2px solid black; border-left: 2px solid black; border-top: 2px solid black;">
			<th rowspan = "2">Mnemonic</th>
			<th rowspan = "2">ID</th>
			<th rowspan = "2">Description</th>
			<th rowspan = "1" colspan = "3">Arguments</th>
		</tr>
		<tr style = "border-right: 2px solid black; ">
			<th>Argument</th>
			<th>Type</th>
			<th>Description</th>
		<tr>
	</thead>
	<tbody>

		<tr style = "border: 2px solid black;">
			<td rowspan="1">MC_UpdateTelemetry</td>
			<td rowspan="1">3584 (0xe00)</td>
			<td rowspan="1">Forces a telemetry update from the motors:
                REG_I2C_ADDRESS         = 0,    // RO - uint8   1 Byte
                REG_TARGET_POSITION     = 1,    // RW - int32   4 Bytes
                REG_TARGET_SPEED        = 2,    // RW - uint8   1 Byte
                REG_CURRENT_POSITION    = 3,    // RO - int32   4 Bytes
                REG_CURRENT_SPEED       = 4,    // RO - uint8   1 Bytes
                REG_MOTOR_CURRENT       = 5,    // RO - int32   4 Bytes
                REG_P_CURRENT           = 6,    // RW - uint16  2 Bytes
                REG_I_CURRENT           = 7,    // RW - uint16  2 Bytes
                REG_P_SPEED             = 8,    // RW - uint16  2 Bytes
                REG_I_SPEED             = 9,    // RW - uint16  2 Bytes
                REG_ACC_RATE            = 10,   // RW - uint16  2 Bytes
                REG_DEC_RATE            = 11,   // RW - uint16  2 Bytes
                REG_MC_CTRL             = 12,   // RW - uint8   1 Byte
                REG_MC_STATUS           = 13,   // RO - uint8   1 Byte
                REG_MC_FAULT            = 14,   // RO - uint8   1 Byte</td>
				<td></td>
				<td></td>
				<td></td>
		</tr>
		<tr style = "border: 2px solid black;">
			<td rowspan="37">MC_SetAllParams</td>
			<td rowspan="37">3600 (0xe10)</td>
			<td rowspan="37">Sets ALL RW params for EVERY motor
                TargetDir : 0 Positive Position, 1 Negative Position
                REG_TARGET_POSITION     = 1,    // int32
                REG_TARGET_SPEED        = 2,    // uint8
                REG_P_CURRENT           = 6,    // uint16
                REG_I_CURRENT           = 7,    // uint16
                REG_P_SPEED             = 8,    // uint16
                REG_I_SPEED             = 9,    // uint16
                ( REG_MC_CTRL = MC_CMD_UPDATE_CONFIG )</td>
					<tr style = "border-right: 2px solid black;border-top: 2px solid black;">
						<td>MotorA_TargetDir</td>
						<td>U8</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorA_TargetPosition</td>
						<td>U32</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorA_TargetSpeed</td>
						<td>U8</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorA_Current_P_Val</td>
						<td>U16</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorA_Current_I_Val</td>
						<td>U16</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorA_Speed_P_Val</td>
						<td>U16</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorA_Speed_I_Val</td>
						<td>U16</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorA_Accel_Rate</td>
						<td>U16</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorA_Decel_Rate</td>
						<td>U16</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorB_TargetDir</td>
						<td>U8</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorB_TargetPosition</td>
						<td>U32</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorB_TargetSpeed</td>
						<td>U8</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorB_Current_P_Val</td>
						<td>U16</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorB_Current_I_Val</td>
						<td>U16</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorB_Speed_P_Val</td>
						<td>U16</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorB_Speed_I_Val</td>
						<td>U16</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorB_Accel_Rate</td>
						<td>U16</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorB_Decel_Rate</td>
						<td>U16</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorC_TargetDir</td>
						<td>U8</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorC_TargetPosition</td>
						<td>U32</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorC_TargetSpeed</td>
						<td>U8</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorC_Current_P_Val</td>
						<td>U16</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorC_Current_I_Val</td>
						<td>U16</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorC_Speed_P_Val</td>
						<td>U16</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorC_Speed_I_Val</td>
						<td>U16</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorC_Accel_Rate</td>
						<td>U16</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorC_Decel_Rate</td>
						<td>U16</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorD_TargetDir</td>
						<td>U8</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorD_TargetPosition</td>
						<td>U32</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorD_TargetSpeed</td>
						<td>U8</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorD_Current_P_Val</td>
						<td>U16</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorD_Current_I_Val</td>
						<td>U16</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorD_Speed_P_Val</td>
						<td>U16</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorD_Speed_I_Val</td>
						<td>U16</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorD_Accel_Rate</td>
						<td>U16</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;border-bottom: 2px solid black;">
						<td>MotorD_Decel_Rate</td>
						<td>U16</td>
						<td></td>
					</tr>
		</tr>
		<tr style = "border: 2px solid black;">
			<td rowspan="4">MC_SetParameter</td>
			<td rowspan="4">3601 (0xe11)</td>
			<td rowspan="4">Update single parameter of selected motor controller(s).</td>
					<tr style = "border-right: 2px solid black;border-top: 2px solid black;">
						<td>Motor_ID</td>
						<td>U8</td>
						<td>Bitmask of motors to update.
                        MotorA    : 0x01
                        MotorB    : 0x02
                        MotorC    : 0x04
                        MotorD    : 0x08
                        (eg. AllMotors = MotorA + MotorB + MotorC + MotorD = 0x0F)
                    </td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>Param_RegAddr</td>
						<td>U8</td>
						<td>The register address of the parameter to set.
                        Target_Dir              = 16    // bool
                        REG_TARGET_POSITION     = 1,    // int32
                        REG_TARGET_SPEED        = 2,    // uint8
                        REG_P_CURRENT           = 6,    // uint16
                        REG_I_CURRENT           = 7,    // uint16
                        REG_P_SPEED             = 8,    // uint16
                        REG_I_SPEED             = 9,    // uint16
                        REG_ACC_RATE            = 10,   // uint16
                        REG_DEC_RATE            = 11,   // uint16
                        ( REG_MC_CTRL = MC_CMD_UPDATE_CONFIG )
                    </td>
					</tr>
					<tr style = "border-right: 2px solid black;border-bottom: 2px solid black;">
						<td>Param_NewValue</td>
						<td>U32</td>
						<td> The new value of the parameter. 
                        (Registers will be type-cast from U32)
                    </td>
					</tr>
		</tr>
		<tr style = "border: 2px solid black;">
			<td rowspan="4">MC_Spin</td>
			<td rowspan="4">3616 (0xe20)</td>
			<td rowspan="4">The new value of the parameter.</td>
					<tr style = "border-right: 2px solid black;border-top: 2px solid black;">
						<td>Motor_ID</td>
						<td>U8</td>
						<td>Bitmask of motors to update.
                        MotorA : 0x01
                        MotorB : 0x02
                        MotorC : 0x04
                        MotorD : 0x08
                        (eg. "Left"-side motors = MotorA + MotorD = 0x09
                        and "Right"-side motors = MotorB + MotorC = 0x06)
                    </td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>Dir</td>
						<td>U8</td>
						<td>Direction motor movement
                        Positive Ticks : 0 , Negative Ticks : 1
                    </td>
					</tr>
					<tr style = "border-right: 2px solid black;border-bottom: 2px solid black;">
						<td>Raw_Ticks</td>
						<td>U32</td>
						<td>Distance to spin in ticks.
                        (Default = 20000)
                    </td>
					</tr>
		</tr>
		<tr style = "border: 2px solid black;">
			<td rowspan="5">MC_Spin_Configured</td>
			<td rowspan="5">3617 (0xe21)</td>
			<td rowspan="5">The new value of the parameter.</td>
					<tr style = "border-right: 2px solid black;border-top: 2px solid black;">
						<td>Motor_ID</td>
						<td>U8</td>
						<td>Bitmask of motors to update.
                        MotorA : 0x01
                        MotorB : 0x02
                        MotorC : 0x04
                        MotorD : 0x08
                        (eg. "Left"-side motors = MotorA + MotorD = 0x09
                        and "Right"-side motors = MotorB + MotorC = 0x06)
                    </td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>Dir</td>
						<td>U8</td>
						<td>Bitmask of direction of each motor
                        Positive Ticks : 0 , Negative Ticks : 1
                    </td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>Raw_Ticks</td>
						<td>U32</td>
						<td>Distance to spin in ticks.
                      (Default = 20000)
                    </td>
					</tr>
					<tr style = "border-right: 2px solid black;border-bottom: 2px solid black;">
						<td>Percent_Speed</td>
						<td>U8</td>
						<td>Speed set by percent of MAX_SPEED.
                      (Default = 100)
                    </td>
					</tr>
		</tr>
		<tr style = "border: 2px solid black;">
			<td rowspan="13">MC_Spin_Full_Custom</td>
			<td rowspan="13">3618 (0xe22)</td>
			<td rowspan="13">The new value of the parameter.</td>
					<tr style = "border-right: 2px solid black;border-top: 2px solid black;">
						<td>MotorA_Dir</td>
						<td>U8</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorA_Ticks</td>
						<td>U32</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorA_Speed</td>
						<td>U8</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorB_Dir</td>
						<td>U8</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorB_Ticks</td>
						<td>U32</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorB_Speed</td>
						<td>U8</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorC_Dir</td>
						<td>U8</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorC_Ticks</td>
						<td>U32</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorC_Speed</td>
						<td>U8</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorD_Dir</td>
						<td>U8</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;">
						<td>MotorD_Ticks</td>
						<td>U32</td>
						<td></td>
					</tr>
					<tr style = "border-right: 2px solid black;border-bottom: 2px solid black;">
						<td>MotorD_Speed</td>
						<td>U8</td>
						<td></td>
					</tr>
		</tr>
		<tr style = "border: 2px solid black;">
			<td rowspan="1">MC_Emergency_Stop</td>
			<td rowspan="1">3632 (0xe30)</td>
			<td rowspan="1">Powers down the motor bus (stopping all actions) immediately.
            May have to reset Hercules to regain I2C comms after this.</td>
				<td></td>
				<td></td>
				<td></td>
		</tr>
	</tbody>
</table>


</body>
</html>
